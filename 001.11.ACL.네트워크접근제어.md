 **ACL(Access Control List)**은 네트워크 **보안**과 **트래픽 제어**를 위한 가장 기본적인 기술이며, 라우터나 스위치, 방화벽에서 필수적으로 사용됩니다. ACL을 이용한 네트워크 접근 제어 기술에 대해 명확하게 설명해 드리겠습니다.

---

## 🔒 ACL(Access Control List)을 이용한 네트워크 접근 제어

ACL은 장비(주로 라우터와 방화벽)를 통과하는 패킷의 헤더 정보를 검사하여, 미리 정의된 **규칙(Rule)**에 따라 해당 패킷을 **허용(Permit)**할지 **차단(Deny)**할지를 결정하는 목록입니다.

### 1. ACL의 기본 작동 원리

ACL은 패킷의 L3(IP 주소) 및 L4(포트 번호) 정보를 기준으로 동작하는 것이 일반적입니다.

1.  **패킷 검사:** 라우터 인터페이스에 ACL이 적용되면, 해당 인터페이스로 들어오거나 나가는 **모든 패킷**이 목록의 규칙을 순서대로 검사받습니다.
2.  **순차적 일치:** 패킷은 목록의 **첫 번째 규칙부터 순서대로** 대조됩니다.
3.  **첫 번째 일치 시 결정:** 패킷이 목록의 **어떤 규칙과 일치**하는 순간, 그 규칙에 정의된 동작(허용 또는 차단)을 수행하고 **더 이상 다음 규칙을 검사하지 않습니다.**
4.  **암묵적 거부 (Implicit Deny):** 모든 ACL의 맨 마지막에는 **"일치하는 규칙이 없으면 모든 트래픽을 거부한다"**는 암묵적 규칙($\text{deny any any}$)이 숨겨져 있습니다. 따라서 ACL을 생성할 때는 **최소한 하나 이상의 허용(Permit) 규칙**이 있어야 합니다.

---

### 2. ACL의 종류와 적용 위치

ACL은 검사하는 기준과 적용 위치에 따라 크게 두 가지로 분류됩니다.

#### 2.1. 표준 ACL (Standard ACL)

| 특징 | 설명 | 실전 적용 팁 |
| :--- | :--- | :--- |
| **검사 기준** | 오직 패킷의 **출발지 IP 주소**만 검사합니다 (L3). | 목적지나 포트 번호를 지정할 수 없으므로, **차단(Deny)** 규칙은 **목적지 라우터에 최대한 가깝게** 적용하는 것이 좋습니다. |
| **ACL 번호** | `1`부터 `99` (확장 범위도 존재) | |

#### 2.2. 확장 ACL (Extended ACL)

| 특징 | 설명 | 실전 적용 팁 |
| :--- | :--- | :--- |
| **검사 기준** | **출발지 IP, 목적지 IP** (L3), **프로토콜(TCP/UDP)**, **포트 번호** (L4) 등을 종합적으로 검사합니다. | 세밀한 제어가 가능하므로, **출발지 라우터에 최대한 가깝게** 적용하여 불필요한 트래픽이 네트워크에 진입하는 것을 초기에 차단해야 합니다. |
| **ACL 번호** | `100`부터 `199` (확장 범위도 존재) | |

#### 2.3. 적용 방향 (Inbound vs. Outbound)

* **Inbound (In):** 라우터의 인터페이스로 **들어오는** 패킷에 적용하여, 네트워크 내부로 진입하는 트래픽을 통제합니다.
* **Outbound (Out):** 라우터의 인터페이스에서 **나가는** 패킷에 적용하여, 네트워크 외부로 나가는 트래픽을 통제합니다.

---

### 3. ACL을 이용한 보안 구축 예시 (실전 팁)

ACL은 특히 **DB 서버 보안**과 같은 중요한 영역에서 필수적입니다.

#### 예시: DB 서버 접근 제어

**목표:** 특정 서버(App Server, IP: `192.168.10.10`)만 DB 서버(DB Server, IP: `192.168.20.20`)의 **MySQL 포트(3306)**에 접근하도록 허용하고, 다른 모든 접근은 차단합니다.

| 순서 | 규칙 (확장 ACL 사용) | 의미 |
| :---: | :--- | :--- |
| **1.** | `permit tcp host 192.168.10.10 host 192.168.20.20 eq 3306` | App Server(`10.10`)에서 DB Server(`20.20`)로의 3306(TCP) 접근을 **명시적으로 허용**합니다. |
| **2.** | `deny ip any any` | 나머지 **모든 출발지**에서 DB Server로의 **모든 프로토콜** 접근을 **차단**합니다. (암묵적 거부가 있지만, 명시하는 것이 좋습니다.) |

**적용 위치:** 이 ACL은 DB 서버 네트워크로 향하는 라우터의 인터페이스에 **Inbound** 방향으로 적용되어야 합니다.

> **자주 오해하거나 실수하는 부분:**
>
> 1.  **순서 오류:** ACL은 순서대로 검사하므로, 포괄적인 **`deny` 규칙을 `permit` 규칙보다 먼저** 두면 원하는 서비스가 모두 차단됩니다.
> 2.  **암묵적 거부:** `permit` 규칙만 달랑 만들면, 나머지 모든 트래픽이 차단되어 필요한 서비스(DNS, 웹 등)까지 막힐 수 있습니다. 필요한 다른 트래픽에 대한 `permit` 규칙도 명시해야 합니다.
> 3.  **반환 트래픽:** TCP 통신을 허용하려면 일반적으로 **발신(Outbound) 트래픽**뿐만 아니라, **수신(Inbound) 트래픽**에 대한 반환 세션도 허용해야 합니다 (방화벽의 상태 추적 기능이 ACL보다 편리한 이유입니다).
