**DHCP(Dynamic Host Configuration Protocol)**는 네트워크 관리의 효율성을 극대화하고 IP 주소 충돌을 방지하는 핵심 기술입니다. 

---

##  1. DHCP의 개요 및 필요성

### DHCP 정의
DHCP는 클라이언트(PC, 모바일 기기, 서버 등)가 네트워크에 접속할 때 **IP 주소, 서브넷 마스크, 게이트웨이, DNS 서버 주소** 등의 필수 네트워크 설정 정보를 **자동으로 할당**받을 수 있도록 해주는 프로토콜입니다.

### DHCP의 필요성 (IT 전략 관점)
1.  **관리 효율성:** 수백, 수천 대의 장비에 일일이 수동으로 IP를 설정할 필요가 없어 **네트워크 관리자의 업무 부담을 획기적으로 줄여줍니다.**
2.  **IP 주소 충돌 방지:** 수동 할당 시 발생하기 쉬운 **IP 주소 중복 할당(충돌)** 문제를 원천적으로 방지합니다.
3.  **유동적인 환경 지원:** 노트북이나 모바일 기기처럼 네트워크를 자주 이동하는 환경에서 **끊김 없이 IP를 재할당**받아 통신 연속성을 보장합니다.

---

##  2. DHCP 작동 원리: DORA 4단계 프로세스

클라이언트가 네트워크에 접속하여 IP 주소를 할당받는 과정은 **DORA(Discovery, Offer, Request, Acknowledgement)**라는 4단계의 통신 프로세스를 따릅니다.

### 1단계: Discovery (발견) - 클라이언트 $\to$ 서버

| 과정 | 프로토콜 | 전송 방식 | 설명 |
| :--- | :--- | :--- | :--- |
| **DHCP Discover** | UDP 68번 | **브로드캐스트** | 클라이언트(Client)가 네트워크에 접속하여 "DHCP 서버 있나요? 저에게 IP 주소를 주세요."라고 **네트워크 전체**에 알립니다. |

### 2단계: Offer (제안) - 서버 $\to$ 클라이언트

| 과정 | 프로토콜 | 전송 방식 | 설명 |
| :--- | :--- | :--- | :--- |
| **DHCP Offer** | UDP 67번 | **유니캐스트/브로드캐스트** | DHCP 서버가 **사용 가능한 IP 주소**와 서브넷 마스크, 임대 기간 등의 설정 정보를 클라이언트에게 **제안**합니다. |

### 3단계: Request (요청) - 클라이언트 $\to$ 서버

| 과정 | 프로토콜 | 전송 방식 | 설명 |
| :--- | :--- | :--- | :--- |
| **DHCP Request** | UDP 68번 | **브로드캐스트** | 클라이언트가 서버가 제안한 **IP 주소를 사용하겠다**고 최종적으로 **요청**합니다. (다른 DHCP 서버들이 이 요청을 듣고 자신이 제안했던 IP를 회수할 수 있도록 브로드캐스트로 전송) |

### 4단계: Acknowledgement (승인) - 서버 $\to$ 클라이언트

| 과정 | 프로토콜 | 전송 방식 | 설명 |
| :--- | :--- | :--- | :--- |
| **DHCP ACK** | UDP 67번 | **유니캐스트/브로드캐스트** | DHCP 서버가 클라이언트에게 "네, 이 IP 주소를 사용해도 좋습니다."라고 **최종 승인**하고, **임대 기간**을 확정하여 전달합니다. |



---

## 🧪 3. DHCP 구축 및 관리 기술

### 3.1. DHCP 스코프 (Scope)
DHCP 서버가 관리하는 IP 주소의 **범위(Range)**와 할당될 설정 정보(게이트웨이, DNS 등)의 집합입니다. 네트워크 관리자는 네트워크 세그먼트별로 스코프를 설정하여 IP를 분배합니다.

### 3.2. IP 임대 (Lease)
IP 주소는 영구적으로 할당되는 것이 아니라, 일정 기간 동안만 사용하도록 **임대(Lease)**됩니다.
* **갱신 (Renewal):** 임대 기간이 절반 정도 경과했을 때, 클라이언트는 서버에 임대 연장을 요청합니다. (DORA 과정 중 Request/ACK 단계를 반복)
* **회수:** 임대 기간이 만료되거나 클라이언트가 네트워크에서 정상적으로 접속을 해제하면 IP 주소는 **주소 풀(Pool)**로 돌아가 재사용 가능해집니다.

### 3.3. DHCP 릴레이 에이전트 (DHCP Relay Agent)
DHCP Discover 메시지는 브로드캐스트이므로 **라우터 경계를 넘어갈 수 없습니다.** DHCP 서버가 다른 네트워크 세그먼트에 있을 때, 라우터가 Discover 메시지를 받아 **유니캐스트**로 DHCP 서버에 전달해주는 기능을 **DHCP 릴레이 에이전트**라고 합니다.

### 3.4. DHCP 스누핑 (보안 관점)
DHCP는 매우 편리하지만, 악의적인 사용자가 가짜 DHCP 서버를 네트워크에 설치할 경우 클라이언트에게 잘못된 게이트웨이 주소 등을 할당하여 **Man-in-the-Middle 공격**이나 **서비스 거부(DoS)** 공격을 유발할 수 있습니다.

* **DHCP 스누핑:** 스위치에서 신뢰할 수 있는 포트(DHCP 서버가 연결된 포트)와 신뢰할 수 없는 포트를 구분하여, 신뢰할 수 없는 포트로부터 들어오는 **악성 DHCP Offer/ACK 메시지**를 차단하는 **보안 기술**입니다.

---

> **파이썬/AI 전문가 팁:**
>
> **클라우드 환경 (AWS, Azure):** 클라우드의 **VPC(Virtual Private Cloud)**에서도 DHCP와 유사한 역할을 하는 서비스가 제공됩니다. VPC 서브넷에 가상 인스턴스를 생성하면, 클라우드 플랫폼이 자동으로 IP 주소를 할당해 주며, 이 역시 효율적인 주소 관리 원칙을 따릅니다. **AI 서버 팜**을 구축할 때도 모든 인스턴스에 DHCP를 통한 동적 주소 할당이 기본 설정으로 사용되어야 합니다.
