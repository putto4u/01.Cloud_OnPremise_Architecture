고가용성(High Availability, HA)을 위한 온프레미스 인프라 구조는 **단일 장애 지점(Single Point of Failure, SPOF)**을 제거하고 시스템의 **지속적인 운영 가능성**을 보장하는 데 중점을 둡니다.  클라우드의 HA 원리를 이해하기 위한 근간이 되는 온프레미스 HA 구조를 핵심 구성 요소별로 설명해 드리겠습니다.

---

## 🏗️ 고가용성을 위한 온프레미스 인프라 구조 (HA Architecture)

HA 구조는 서버, 스토리지, 네트워크 등 모든 IT 자원을 **이중화(Redundancy)**하고, 장애 발생 시 자동으로 시스템이 전환되는 **자동 페일오버(Automatic Failover)** 기능을 구현하는 것이 핵심입니다.

### 1. 서버 계층 (Server Layer) HA

서버의 HA는 주로 **클러스터링(Clustering)** 기술을 통해 구현됩니다.

* **이중화된 서버 구성:**
    * **액티브-스탠바이 (Active-Standby):** 하나의 서버(Active)가 실제 서비스를 제공하고, 다른 서버(Standby)는 대기 상태로 있다가 Active 서버에 장애가 발생하면 Standby 서버가 자동으로 역할을 이어받습니다 (Failover). 데이터베이스(DB) 서버 이중화에 많이 사용됩니다.
    * **액티브-액티브 (Active-Active):** 두 서버가 모두 동시에 서비스를 제공하여 부하를 분산합니다. 한 서버에 장애가 발생해도 남은 서버가 모든 트래픽을 처리하며 서비스 연속성을 유지합니다. 웹/애플리케이션(App) 서버 이중화에 주로 사용됩니다.
* **클러스터 관리:**
    * **하트비트 (Heartbeat):** 클러스터로 묶인 서버들이 서로의 상태를 주기적으로 확인하는 신호입니다. 이 신호가 끊어지면 장애로 간주하고 페일오버를 시작합니다.
    * **공유 스토리지 (Shared Storage):** 클러스터의 모든 서버가 동일한 데이터에 접근할 수 있도록 네트워크 스토리지(SAN 등)를 공유합니다. (단, Active-Active 구조에서는 일반적으로 데이터베이스 동기화 방식을 사용합니다.)

### 2. 네트워크 계층 (Network Layer) HA

네트워크는 서버의 접근성과 연결성을 보장하는 핵심이므로, 모든 경로를 이중화합니다.

* **로드 밸런싱 (Load Balancer, L4/L7):**
    * 외부 트래픽을 여러 대의 애플리케이션 서버로 분산하여 부하를 낮추고, 서버 한 대에 장애가 발생하더라도 정상 서버로만 트래픽을 전달하여 HA를 실현합니다.
    * **세션 스티키니스(Session Stickiness)** 설정을 통해 특정 사용자의 세션이 항상 동일한 서버로 연결되도록 하여 서비스 연속성을 지원합니다.
* **스위치 및 라우터 이중화:**
    * 네트워크 장비 자체를 이중화하고, **이더채널(EtherChannel)** 또는 **본딩(Bonding)**을 통해 서버의 NIC를 두 개 이상의 스위치에 연결하여 물리적인 연결 장애를 방지합니다.
* **VPN 및 방화벽 이중화:** **VRRP(Virtual Router Redundancy Protocol)**나 유사 프로토콜을 사용하여 방화벽이나 라우터가 장애 시 빠르게 다른 장비로 역할을 전환하도록 구성합니다.

### 3. 스토리지 계층 (Storage Layer) HA

데이터의 HA는 시스템의 가장 중요한 목표입니다.

* **RAID (Redundant Array of Independent Disks):** 디스크 자체의 장애에 대비하여 데이터를 여러 디스크에 분산 저장하는 기술 (e.g., RAID 1, RAID 5, RAID 6).
* **SAN/NAS 이중화:** **스토리지 장비 자체**를 이중화하고, 서버와 스토리지 간의 연결 경로(파이버 채널 등)도 이중화하여 단일 스토리지 장비 장애에도 서비스가 중단되지 않도록 합니다.
* **DB 복제 (Replication):** 데이터베이스 자체에서 데이터를 실시간으로 다른 서버에 복사하는 기술 (Active-Standby 또는 Active-Active).

---

## 🎯 온프레미스 HA의 전략적 이해 (클라우드/보안 관점)

### 실전 팁: HA와 DR (재해 복구)의 구분

수강생들이 자주 혼동하는 개념입니다. 명확히 구분해 주십시오.

| 구분 | 고가용성 (HA) | 재해 복구 (DR, Disaster Recovery) |
| :--- | :--- | :--- |
| **목표** | **단일 시스템 장애** 방지 (몇 초 ~ 몇 분 이내 복구) | **광범위한 재해** (지진, 화재) 발생 후 복구 |
| **범위** | 단일 데이터센터 내 **이중화** | **원거리**의 다른 데이터센터로 **데이터 복제** 및 시스템 전환 |
| **핵심** | **자동 페일오버** 및 **무중단 운영** | **RTO/RPO** 목표 달성 및 **비즈니스 연속성** 확보 |

### 클라우드와의 연결

클라우드 컴퓨팅의 **가용 영역(Availability Zone, AZ)** 개념은 온프레미스 HA 구조를 **원거리 분산** 방식으로 확장한 것입니다. 온프레미스 HA가 **단일 데이터센터 내의 물리적 이중화**라면, 클라우드 HA는 **여러 AZ를 활용한 지역적 분산**을 기본으로 합니다.

 **DB 복제, L4/L7 로드 밸런싱, 클러스터링** 등의 원리가 클라우드의 가상 환경에서 어떻게 구현되는지 이해.
